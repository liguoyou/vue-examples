# åˆ›å»º UNIAPP + uView-ui é¡¹ç›®

## ä¸€.å®‰è£… Vue

`yarn global add @vue/cli`



## äºŒ.åˆ›å»ºé¡¹ç›®

**1.æ‰§è¡Œå‘½ä»¤**

`vue create -p dcloudio/uni-preset-vue uniapp-demo`

windows ä¸­ä½¿ç”¨: `winpty vue.cmd create -p dcloudio/uni-preset-vue uniapp-demo`

**2.é€‰æ‹©æ¨¡æ¿ "é»˜è®¤æ¨¡æ¿"**

**3.è¿›å…¥ç›®å½•, è¿è¡Œé¡¹ç›® `cd uniapp-demo`, `yarn serve`**



## ä¸‰.è£…ä¸é€¢æ—¶, å®˜æ–¹åŒ…ç‰ˆæœ¬æŠ¥é”™: `Uncaught ReferenceError: exports is not defined`

**è§£å†³:  å›é€€ @babel/runtime ç‰ˆæœ¬**

ä¸´æ—¶è§£å†³æ–¹æ¡ˆ: å°† `yarn.lock` ä¸­çš„ `@babel/runtime` çš„ `version "7.13.8"` æ”¹æˆ `version "7.12.18"`, åˆ æ‰å®‰è£…åŒ…, å†é‡æ–°å®‰è£…


## å››.å®‰è£… dart-sass, sass-loader

**1.`yarn add sass-loader@10.1.1`**

ç”±äºæœ€æ–°ç‰ˆæœ¬(11.xx.xx)çš„`sass-loader`åœ¨Vue2.x.xxä¸­è¿è¡Œä¼šæŠ¥é”™, è¿™é‡Œé€‰æ‹©å®‰è£…äº† `10.1.1` çš„ç‰ˆæœ¬

**2.`yarn add sass` **

è¿™é‡Œæ¨èå®‰è£…çš„æ˜¯ `dart-sass ` (å·²æ›´å `sass`); å½“ç„¶ä¹Ÿå¯ä»¥å®‰è£… `node-sass`



## äº”.å®‰è£… uView-ui ä¸é…ç½®

å®˜æ–¹æ–‡æ¡£: `https://uviewui.com/components/install.html`

```bash
# å‘½ä»¤å®‰è£…
yarn add uview-ui
```

```js
// main.js
import uView from "uview-ui";
Vue.use(uView);
```

```scss
/* uni.scss */
@import 'uview-ui/theme.scss';
```

```vue
// App.vue
<style lang="scss">
	/* æ³¨æ„è¦å†™åœ¨ç¬¬ä¸€è¡Œï¼ŒåŒæ—¶ç»™styleæ ‡ç­¾åŠ å…¥lang="scss"å±æ€§ */
	@import "uview-ui/index.scss";
</style>
```

```json
// pages.json
{
	"easycom": {
		"^u-(.*)": "uview-ui/components/u-$1/u-$1.vue"
	},
	
	// æ­¤ä¸ºæœ¬èº«å·²æœ‰çš„å†…å®¹
	"pages": [
		// ......
	]
}
```



## å…­.é…ç½® ESLint

**1.å®‰è£…ä¾èµ–**

```bash
# å®‰è£… eslint ç›¸å…³ä¾èµ–
yarn add eslint eslint-plugin-import eslint-plugin-vue -D

# å®‰è£… eslint ç›¸å…³æ’ä»¶
yarn add babel-eslint @vue/cli-plugin-eslint @vue/eslint-config-airbnb -D
```

**2.æ–°å»º `.eslintrc.js`**

```js
// .eslintrc.js
module.exports = {
  root: true,
  env: {
    node: true,
    browser: true,
    es6: true,
  },
  extends: [
    'plugin:vue/recommended',
    '@vue/airbnb',
  ],
  parserOptions: {
    parser: 'babel-eslint',
  },
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off', // ç”Ÿäº§ç¯å¢ƒç¦ç”¨consele
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off', // ç”Ÿäº§ç¯å¢ƒç¦ç”¨debugger
    // https://eslint.org/docs/rules/linebreak-style#enforce-consistent-linebreak-style-linebreak-style
    'linebreak-style': 'off', // å¿½ç•¥æ£€æµ‹æ¢è¡Œé£æ ¼ è¯¦æƒ…åœ¨è¿™ â†‘
    'vue/max-attributes-per-line': 'off', // å…³é—­å¼ºåˆ¶ html æ ‡ç­¾æ¢è¡Œ
    'no-param-reassign': ['error', { props: false }], // å…è®¸ä¿®æ”¹å‚æ•°ä¸­çš„å±æ€§å€¼
    'prefer-destructuring': ['error', { object: true, array: false }], // å…è®¸æ•°ç»„é€šè¿‡ä¸‹æ ‡å–å€¼
    'no-use-before-define': ['error', { functions: false }], // å…è®¸functionå£°æ˜çš„å‡½æ•°åœ¨å®šä¹‰å‰ä½¿ç”¨
    'func-names': 'off', // å…è®¸ä½¿ç”¨functionå£°æ˜åŒ¿åå‡½æ•°
    'max-len': ['error', { code: 200 }], // æ¯ä¸€è¡Œæœ€å¤š200ä¸ªå­—ç¬¦
    'import/no-extraneous-dependencies': 'off', // å…è®¸importå¼€å‘ä¾èµ–
    'vue/singleline-html-element-content-newline': 'off', // å…³é—­å•è¡Œæ ‡ç­¾çš„å¼ºåˆ¶æ¢è¡Œ
    'no-unused-expressions': 'off', // å…è®¸å‡ºç°æœªä½¿ç”¨çš„è¡¨è¾¾å¼
    'import/extensions': 'off', // å…è®¸importæ—¶çœç•¥æ‰©å±•å
    'no-restricted-syntax': 'off', // å…³é—­ â€˜ç¦æ­¢ä½¿ç”¨æŒ‡å®šçš„è¯­æ³•â€™
    'no-plusplus': 'off', // å…è®¸ä½¿ç”¨++
    'import/no-cycle': 'off', // å…è®¸å¾ªç¯å¼•å…¥
    // 'comma-dangle': 'off', // è¦æ±‚æˆ–ç¦æ­¢å°¾éšé€—å·ï¼ˆé€—å·ï¼‰
    // 'vue/html-self-closing': 'off', // å…³é—­ ç©ºå†…å®¹è‡ªåŠ¨é—­åˆæ ‡ç­¾
    // 'eqeqeq': 'off', // å…³é—­å¼ºåˆ¶ä½¿ç”¨å…¨ç­‰äº
  },
  globals: {
    // é…ç½®å…¨å±€å˜é‡,
    // åœºæ™¯: ç¬¬ä¸‰æ–¹åº“ä¸­çš„å…¨å±€å˜é‡(å¦‚jq, uni-app...), å¦‚æœä¸é…ç½®, ä¼šæç¤º `ä½¿ç”¨æœªå®šä¹‰å˜é‡` é”™è¯¯
    // é…ç½®: â†“ å‚è€ƒè¿™é‡Œ, å‡è®¾å¾®ä¿¡ä¸­çš„wxæ˜¯å…¨å±€å˜é‡, å°±æ–°å¢é…ç½® `wx: true` (ä»¥ä¸‹ä¸ºä¾‹å­,å¯åˆ é™¤)
    uni: true,
    wx: true,
  },
};
```

**3.æ–°å»º`.eslintignore`**

```eslintignore
dist/
.eslintrc.js
babel.config.js
postcss.config.js
node_modules/
```

**4.æ–°å»º`.editorconfig`**

```editorconfig
[*.{js,jsx,ts,tsx,vue}]
  indent_style = space
  indent_size = 2
  end_of_line = lf
  trim_trailing_whitespace = true
  insert_final_newline = true
  max_line_length = 100
```

**5.å¯ç”¨eslint**

æŸ¥çœ‹ VS Codeå³ä¸‹è§’æ˜¯å¦å‡ºç° `ğŸš«ESLint`, `âˆšESLint`, `âˆšâˆšESLint`

éšæ„æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶, æ¯”å¦‚"App.vue", æŒ‰ä¸‹å¿«æ·é”® `Ctrl + Shift + P`, è¾“å…¥ `ESLint: Manage Library Execution` é€‰æ‹©å¹¶å›è½¦, é€‰æ‹© `Allow`, æŸ¥çœ‹ VS Codeå³ä¸‹è§’æ˜¯å¦å‡ºç° `âˆšESLint`, è‡³æ­¤ eslint å·²ç”Ÿæ•ˆ

**6.é…ç½® `settings.json` ä¿å­˜è‡ªåŠ¨ä¿®å¤å’Œæ ¼å¼åŒ–**

```json
// settings.json
"editor.codeActionsOnSave": {
    "source.fixAll": true,
    "source.fixAll.eslint": true
},
```





## 7.æŠ¥é”™: tsconfig.json ä¸­æ‰¾ä¸åˆ°ä»»ä½•è¾“å…¥...

**è§£å†³: æ·»åŠ ä¸€ä¸ªç©ºçš„æ–‡ä»¶ test.ts, ç„¶åå† tsconfig.json ä¸­å¢åŠ  "files" å­—æ®µ**

```ts
// test.json
// tsconfig.json ä¸­æ‰¾ä¸åˆ°ä»»ä½•è¾“å…¥
```

```json
// tsconfig.json
{
  // ...
  "files": ["test.ts"]
}

```